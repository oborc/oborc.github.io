# 招商银行

## 一面

### 稳定排序算法

冒泡、插入、并归、桶

### 完数

一个数除了自己以外的因子相加等于她自己

eg: 6 = 1+2+3

判断完数：

```java
for(int i = 1;i<num;i++)
{
    if(num%i == 0)
    {
        sum = sum+i;
    }
}
if sum == num
return true;
```

### 进程线程的区别：

| 进程                   | 线程              |
| ---------------------- | ----------------- |
| 资源分配的最小单元     | CPU调度的最小单元 |
| 进程执行过程中内存独享 | 线程间内存共享    |



### 线程的创建方式

thread、runnable、通过Callable和FutureTask创建线程、线程池

适用场景：thread--》继承实现，类不能继承其他类

​		runnable -->面向接口编程，runnable 的实现类可扩展性更高

​		futureTask 可以获取线程执行完的时间

### 数据结构：

​	二叉平衡树、搜索树、B树、B+树、红黑树、大根堆

- ##### 红黑树

  - 二叉查找树的优化树

  - 所有的叶子结点都是黑色null

  - 每个红色结点的子节点都是黑色

  - 根节点是黑色

  - 任意节点到每个叶子结点都包含相同的黑色节点数

    应用

    HASHMAP

- ##### 大根堆

  - 根节点大于左右子树、子树也满足这个条件
  - 大根堆是一颗完全二叉树。每一层都是满的，数组存储
  - 插入的时候。从根节点插入，然后以根节点的父节点为起始调节的节点。依次向前调整每一个节点。
  - 删除的时候，用最后一个节点替代根节点。然后自顶向下递归调整。

- ##### B树

  - 多路平衡查找树
  - 根节点是中间大小的树，根节点中有<=K-1个元素，每个元素是一个临界值、是子节点的分界点。子节点有K个。每个子节点也有<=K-1个元素。

- ##### B+树

  - 查找时间更接近二分查找。
  - 非叶子结点中只存索引
  - 所有的叶子结点是具体数据
  - 所有叶子结点构成一个链表

用B树或者B+树的原因：

​	**不可能全部取出存在内存里，如果数据量非常大。磁盘IO是决定时间的主要因素。B树和B+树是比较胖的和比较矮的，减少了磁盘IO。所以用B树或者B+树。减少查找时间。一个节点是一个磁盘块大小，减少IO请求次数。**Mysql的innodb用的是B+树。

**innodb中。B树中的结点存放表中数据的页面。一个节点的大小就是一个页**



### mysql查询优化

- 建立索引

  - 聚集索引

    一张表中应该只有一个聚集索引，一般用主键表示。找到聚集索引，会将聚集索引记录所在页全部加入内存中。在B+树中。索引的键就是主键。

  - 辅助索引

    - 辅助索引不会影响聚集索引。聚集索引是数据的实际存放方式。辅助索引只是为了加快查找速度

- sql语句优化

  - not null。避免null值判断
  - 在where或者order by涉及的列上建立索引
  - in or not in 会导致全表扫描，用between比较好
  - where中用参数也会导致全表扫描（运行时进行解析局部变量）、where中用==以外的逻辑判断也会是全表扫描
  - 字段值小查询效率高（一个页存放更多的数据）
  - 用临时表。减少扫描
  - 啊
  - ......


### mysql中的锁

- **悲观锁、乐观锁**

  - 乐观锁不是真正的锁
  - 悲观锁是对数据加锁。只有有相应权限的线程才可对数据进行读取。线程释放资源后，其他线程才可以访问

- **互斥锁（写锁）**

  - 允许事务对一条数据进行删除和更新
  - 互斥锁和任意锁都不兼容。

- **共享锁（读锁）**

  - 允许事务对一条数据进行读取
  - 共享锁可以嵌套（可以并行读）

  **互斥锁和共享锁都是行级锁**

- **意向锁**（表级）

  - 意向共享锁：
    - 事务要对某条记录获取共享锁，先在该表上加上意向共享锁

  - 意向互斥锁

    - 事务对某条记录获取共享锁，现在该表上加上意向互斥锁

****


## 二面

### 高可用系统解决方案

高可用指的是系统在宕机后的恢复服务所用的时间。以及系统宕机或者出现故障的次数要小

- 负载均衡
  - 负载均衡原理：负载均衡器，如果一个服务器出现故障。将请求转移到其他服务器
  - 负载均衡的相关算法
    - hash ip 相同ip访问相同服务器
    - hash url 相同url 访问相同服务器
    - 权重随机
    - 轮询
    - 最少连接：每次把请求发送到最少连接数的服务器上
- 集群（冗余备份）
  - 解决单点问题
- 超时设置
  - 超时后重新发起请求or超时处理
- 服务降级
  - 将一个服务拆分成很多个不同级别的服务。在服务出现bug时，优先保证基本服务能够运行
- 流量缓冲
  - 避免高峰访问压垮数据库
  - 访问量过多时，将访问放在队列。依次服务。
- 防雪崩
  - 服务请求超过最大量时拒绝新的服务请求（类似于线程池线程超过任务量时直接拒绝）

### spring自实现注解

注解参数：所有基本数据类型（int,float,boolean,byte,double,char,long,short) 
   　　 2. String类型 
            　　 3. Class类型 
      ​      　　 4. enum类型 
         ​         　　 5. Annotation类型 
         ​         　　 6. 以上所有类型的数组 

@pointCut 定义执行注解的函数

@Before or @After 定义在用了注解的函数前还是函数后执行注解

@Before 中参数需要加上注解和pointCut





### springIOC、AOP原理



### 秒杀系统的设计



### SpringBoot 的Application







# 拼多多一面（凉）

### 返回数组最大奇数和（加起来为奇数的最大值是多少）

### 分页实现

- 一次全部读取到内存。用list 的sublist 实现
- mysql limit 实现，limit 参数1,参数2
  - 参数1是起始行偏移量
  - 参数2是最大的查询页的大小（一页中的数据条数）

### tomcat原理

Servelet 拦截、映射到controller

### spring和springboot 的区别

springboot提供热插拔，sprintboot-starter这样的方式。简化配置

内置tomcat 服务器。可以独立运行





# 数睿科技

## 一面（大多数企业都会问到的）

currentHashMap实现原理、最大分段数

hashMap 实现原理

引用存放位置--虚拟机栈

内存分配

垃圾回收机制，新生代，老年代

hashmap和hashTable区别



## 二面

装饰器模式代码编写

链表反置

不知圆周率的情况下计算圆的面积

随机返回列表中的值，每个值返回一次

英文阅读理解



# vivo

Java基础，序列化，抽象，封装，面向对象特点

# 字节跳动

## 一面

找出一组数的奇数和偶数，分别放在数组的左半边和右半边，不要求保证顺序

快速排序优化算法

缓存一致性保证（回答参考Java volatile，具体答案可百度）

hashmap 为何会死锁

线程进程区别

内存分配

类加载机制、双亲模型

hashtable 为什么效率低



## 二面

找出二维数组中特定的值。二维数组从左到右，从上到下递增（leetcode）

top n 优化算法

Https 如何加密（http 权威指南）

报文加密算法（http权威指南）

操作系统传递消息方法

缓存雪崩、穿透